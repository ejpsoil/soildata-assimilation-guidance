<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Soil data guidance - A discovery service in GeoNetwork</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../style/styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="https://ejpsoil.eu" class="navbar-brand navbar-brand-logo">
    <img src="https://ejpsoil.eu/fileadmin/projects/ejpsoil/EJP_Soil_logo_cmyk-h100.png" alt="EJPSoil website" class="navbar-logo">
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../identification.html">
 <span class="menu-text">Identification</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../etl.html">
 <span class="menu-text">Harmonization</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../codelists.html">
 <span class="menu-text">Code lists</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../metadata.html">
 <span class="menu-text">Discovery</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../view.html">
 <span class="menu-text">View</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../download.html">
 <span class="menu-text">Download</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../QOS.html">
 <span class="menu-text">QOS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../utils/index.html">
 <span class="menu-text">Utils</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../glossary.html">
 <span class="menu-text">Glossary</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#schema-plugins" id="toc-schema-plugins" class="nav-link active" data-scroll-target="#schema-plugins">Schema plugins</a></li>
  <li><a href="#quick-start" id="toc-quick-start" class="nav-link" data-scroll-target="#quick-start">Quick Start</a></li>
  <li><a href="#create-records" id="toc-create-records" class="nav-link" data-scroll-target="#create-records">Create records</a></li>
  <li><a href="#harvest-records" id="toc-harvest-records" class="nav-link" data-scroll-target="#harvest-records">Harvest records</a></li>
  <li><a href="#discovery-from-qgis" id="toc-discovery-from-qgis" class="nav-link" data-scroll-target="#discovery-from-qgis">Discovery from QGIS</a></li>
  <li><a href="#atom-download-service-from-geonetwork" id="toc-atom-download-service-from-geonetwork" class="nav-link" data-scroll-target="#atom-download-service-from-geonetwork">Atom download service from GeoNetwork</a></li>
  <li><a href="#read-more" id="toc-read-more" class="nav-link" data-scroll-target="#read-more">Read more</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/ejpsoil/soildata-assimilation-guidance/edit/main/docs/cookbook/geonetwork.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/ejpsoil/soildata-assimilation-guidance/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">A discovery service in GeoNetwork</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><a href="https://geonetwork-opensource.org">GeoNetwork</a> is a catalogue for registering spatial datasets and services. GeoNetwork does support multiple <a href="https://github.com/metadata101">metadata models</a> based on XML, but it is optimized for iso19139:2007 and iso19115-2:2018. This recipe uses <a href="../utils/docker.html">docker</a> to run GeoNetwork locally. It will discuss aspects such as schema plugins, creating metadata records, set up codelists and harvest metadata.</p>
<section id="schema-plugins" class="level2">
<h2 class="anchored" data-anchor-id="schema-plugins">Schema plugins</h2>
<p>GeoNetwork provides a dynamic system to pre load schema plugins providing support for a variety of metadata models, such as iso19139:2007, iso19115-2:2018, national profiles based on these, DCAT, SensorML, EML/GBIF, etc. Many of these plugins are made available via https://github.com/metadata101. Before creating or importing records, verify that the relevant profile is available in the GeoNetwork instance.</p>
<p>Creation of metadata records is based on templates. For each metadata model a series of templates is available. Users select a relevant template for their use case while creating a new record to describe a resource. Any template is based on a specific metadata model, which determines which properties need to be described and in which format the record will be stored.</p>
<p>GeoNetwork provides a number of transformation options for crosswalks between metadata models, but you should always consider some loss of information in these crosswalks. Crosswalks occur for example when a user requests a record in DCAT, while it is stored as iso19139:2007 in the database.</p>
</section>
<section id="quick-start" class="level2">
<h2 class="anchored" data-anchor-id="quick-start">Quick Start</h2>
<ul>
<li><p>Start a GeoNetwork instance locally (initial startup may take some time)</p>
<pre><code>docker run -p 8080:8080 geonetwork:3.12</code></pre></li>
<li><p>Navigate to <a href="http://localhost:8080/geonetwork">http://localhost:8080/geonetwork</a></p></li>
<li><p>Let’s load some sample data. Select <code>Login</code>; login as usr:<code>admin</code>, pwd:<code>admin</code></p></li>
<li><p>Select <code>Admin console</code> &gt; <code>Metadata records and templates</code>; Select <code>iso19139:2007</code>, click on <code>load samples</code> and <code>load templates</code></p></li>
<li><p>On <code>Admin console</code> &gt; <code>Settings</code>, set the title and url of the instance.</p></li>
<li><p>Let’s set up some code lists (which populate the pull downs on the editor). Select <code>Classification systems</code> from <code>Admin console</code>.</p></li>
<li><p>Select <code>From registry</code> in <code>Add thesaurus</code>.</p></li>
<li><p>Click <code>Use INSPIRE registry</code> for the <code>Url</code> field</p></li>
<li><p>Select language(s) and <code>INSPIRE theme register</code> and click <code>Upload</code></p></li>
<li><p>Add another thesaurus from registry, select <code>INSPIRE metadata code list register</code> and then <code>Spatial scope</code>.</p></li>
<li><p>Continue with other relevant code lists, notice that you can also create a new code list manually.</p></li>
</ul>
</section>
<section id="create-records" class="level2">
<h2 class="anchored" data-anchor-id="create-records">Create records</h2>
<ul>
<li>On <code>Contribute</code> Editor board, click <code>Add new record</code></li>
<li>Select a template (they we’re loaded on the previous step) and click <code>create</code></li>
<li>On the editor notice the view (eye) button on top right, you can switch the editor view between <code>Simple</code>, <code>Full</code> and <code>XML</code>.</li>
<li>Notice the <code>validate</code> button, which provides a report on the level of completion of the record</li>
<li>The associated resources side panel displays links to remote resources, such as data files, data services and thumbnails</li>
<li>Notice that you can also import a record from a local xml file</li>
<li>Notice that you can collapse the <code>save</code> button to <code>save as template</code>, in this way others can use this record as a base to start a new record</li>
</ul>
</section>
<section id="harvest-records" class="level2">
<h2 class="anchored" data-anchor-id="harvest-records">Harvest records</h2>
<p>Harvesting is the process of importing records from remote sources at intervals.</p>
<ul>
<li>Open <code>harvesting</code> from <code>Admin console</code></li>
<li>Select <code>OGC CSW 2.0.2</code> from <code>Add thesaurus</code></li>
<li>Provide a name for the harvester</li>
<li><code>Action on UUID collision</code> determines the behaviour when similar records are found in multiple remote endpoints</li>
<li>Provide the url of the remote endpoint (for example https://www.geocatalogue.fr/api-public/servicesRest?request=GetCapabilities&amp;service=CSW)</li>
<li>Add a filter <code>Anytext:Soil</code></li>
<li>Set a interval schedule for the harvest (<code>only one run</code>)</li>
<li>Harvesters have many additional options, you can read about it in the <a href="https://geonetwork-opensource.org/manuals/trunk/en/user-guide/harvesting/index.html">documentation</a></li>
<li>Click <code>Save</code> and on the next screen <code>harvest</code>, a spinner starts to run, the harvest may take some minutes, depending of the size of the remote catalogue</li>
<li>Notice a list of harvest run logs at the bottom of the screen, you can click <code>log</code> to check in more detail.</li>
<li>If you increase logging on <code>Settings</code> to <code>DEV</code>, the logging on <code>harvesting</code> will also provide more details (in case of non explainable errors)</li>
</ul>
</section>
<section id="discovery-from-qgis" class="level2">
<h2 class="anchored" data-anchor-id="discovery-from-qgis">Discovery from QGIS</h2>
<p>The <code>metasearch</code> plugin is a default plugin in QGIS. - Open the plugin from the <code>Web</code> menu (or toolbar). - Click <code>New connection</code>. Provide a name for the connection and the url http://localhost:8080/geonetwork/srv/eng/csw - Switch to the find tab, and search some records. - Select a search result, for some search results the <code>load data</code> button (lower left) is activated and you can load some data to the map</p>
</section>
<section id="atom-download-service-from-geonetwork" class="level2">
<h2 class="anchored" data-anchor-id="atom-download-service-from-geonetwork">Atom download service from GeoNetwork</h2>
<p>You can enable an ATOM download service in GeoNetwork. GeoNetwork provides an opensearch API and will use the metadata content to generate Atom service and dataset files. You can read more about this option in the <a href="https://geonetwork-opensource.org/manuals/3.10.x/en/tutorials/inspire/download-atom.html">documentation</a>.</p>
</section>
<section id="read-more" class="level2">
<h2 class="anchored" data-anchor-id="read-more">Read more</h2>
<ul>
<li>Website: https://geonetwork-opensource.org/</li>
<li>GitHub repository: https://github.com/geonetwork</li>
<li>Docker composition: https://github.com/geonetwork/docker-geonetwork/blob/main/4.2.1/docker-compose.yml</li>
<li>Documentation: https://geonetwork-opensource.org/manuals/4.0.x/en</li>
<li>Tutorial: https://geonetwork-opensource.org/manuals/trunk/en/tutorials/introduction</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../about.html">About</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../license.html">License</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://cordis.europa.eu/project/id/862695"><img style="width:80px;margin:5px 0px" src="https://ejpsoil.eu/fileadmin/_processed_/0/3/csm_Horizon_2020_funding_Thumbnail_a20cd538b7.jpg"></a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>